# 语文错题助手 - 功能描述文档

## 项目概述

语文错题助手是一个基于 React + TypeScript + Vite 构建的 Web 应用，旨在帮助学生学习语文生字词和古诗词。应用利用 AI 大模型（DeepSeek、Qwen）进行智能分析，自动生成拼音、释义、辨析等考点，并支持生成可打印的练习试卷。

## 核心功能

### 1. 生字词录入模块

#### 1.1 多种输入方式
- **手动输入**：支持在文本框中输入多个字词，用空格、逗号或换行符分隔
- **图片识别（OCR）**：
  - 支持从相册选择图片
  - 支持直接拍照识别（移动端使用原生相机，PC端使用摄像头）
  - 自动识别图片中的中文文字并提取到输入框
- **批量处理**：一次可输入多个字词，系统自动去重并批量分析

#### 1.2 AI 智能分析
- **拼音生成**：自动为每个字词生成标准拼音
- **释义题目生成**：
  - 识别字词中的关键字符
  - 生成4个选项的选择题
  - 标注正确答案索引
- **字义辨析题目生成**：
  - 识别字词中特定字符的含义
  - 生成包含相同含义字符的其他词语选项
  - 用于测试学生对同一字符在不同语境中相同含义的理解

#### 1.3 考点配置
- **默认考点设置**：用户可预设默认启用的考点类型
  - 拼音（注音题）
  - 书写（看拼音写词语）
  - 释义（字义选择题）
  - 辨析（字义辨析题）
- **个性化调整**：每个词条分析完成后，可单独调整启用的考点类型

#### 1.4 分析队列管理
- **并发控制**：最多同时分析3个词条，避免API调用过载
- **状态显示**：实时显示每个词条的分析状态（等待中/分析中/完成/失败）
- **结果预览**：分析完成后显示预览，用户可确认或删除
- **批量保存**：一键保存所有分析完成的词条到题库

### 2. 古诗词录入模块

#### 2.1 输入方式
- 支持输入诗名（如"静夜思"）
- 支持输入整首诗内容
- AI 自动识别并补全完整信息

#### 2.2 AI 智能分析
- **基本信息提取**：
  - 诗名
  - 朝代
  - 作者
  - 完整内容
- **默写题目生成**：
  - 自动识别关键诗句
  - 生成填空题目（保留上下文）
  - 标注正确答案
- **释义题目生成**：
  - 识别诗句中的重点字词
  - 生成4个选项的选择题
  - 测试学生对古诗词中字词含义的理解

#### 2.3 考点配置
- 古诗默写
- 古文释义

### 3. 题库管理模块

#### 3.1 词条列表
- **卡片式展示**：每个词条以卡片形式展示
- **信息显示**：
  - 字词/诗名（大字显示）
  - 拼音/作者信息
  - 启用的考点标签
  - 录入日期
- **分页加载**：每页显示24个词条，支持"加载更多"
- **类型区分**：古诗词条目有特殊图标标识

#### 3.2 词条编辑
- **考点编辑**：点击编辑按钮可修改每个词条启用的考点类型
- **实时保存**：编辑后立即保存到本地存储

#### 3.3 词条删除
- 支持删除单个词条
- 删除前有确认提示

#### 3.4 数据统计
- 显示题库总词数
- 显示最近录入的词条数量

### 4. 试卷生成模块

#### 4.1 筛选功能
- **日期筛选**：可按录入日期筛选词条
- **全部显示**：默认显示所有词条

#### 4.2 题型分类
系统自动将词条按考点类型分类，生成以下题型：

1. **看汉字，写拼音**
   - 显示汉字，学生填写拼音
   - 提供田字格样式的答题框

2. **看拼音，写词语**
   - 显示拼音，学生填写汉字
   - 拼音与汉字对齐显示

3. **古诗文默写**
   - 显示诗名、朝代、作者
   - 提供填空题目（保留上下文）
   - 多个填空点

4. **古诗文阅读与释义**
   - 显示完整诗文内容
   - 针对特定字词生成选择题
   - 测试古诗词理解能力

5. **字义选择**
   - 针对字词中的特定字符
   - 4个选项的选择题
   - 测试字义理解

6. **字义辨析**
   - 找出与给定字词中字符含义相同的其他词语
   - 测试对同一字符在不同语境中相同含义的理解

#### 4.3 试卷格式
- **A4 标准格式**：210mm × 297mm
- **专业排版**：
  - 标题栏（班级、姓名、得分、日期）
  - 题型分节（带编号）
  - 清晰的题目布局
- **打印优化**：
  - 自动分页
  - 打印样式优化
  - 支持导出 PDF

#### 4.4 答案页
- **自动生成**：系统自动生成参考答案页
- **完整答案**：
  - 拼音题答案
  - 书写题答案
  - 默写题答案
  - 选择题答案（标注正确选项和解析）
- **分页显示**：答案页单独一页，方便教师批改

### 5. 数据管理模块

#### 5.1 本地存储
- 所有数据存储在浏览器 localStorage
- 自动保存，无需手动操作
- 数据持久化，刷新页面不丢失

#### 5.2 数据备份
- **导出功能**：
  - 导出为 JSON 格式
  - 文件名包含日期（如：`语文错题本备份_2025-01-15.json`）
  - 包含所有词条完整信息

#### 5.3 数据恢复
- **导入功能**：
  - 支持导入 JSON 备份文件
  - 自动去重（基于词条ID）
  - 合并到现有题库
  - 导入前显示确认提示

#### 5.4 数据清空
- 支持清空所有数据
- 清空前有二次确认
- 建议先导出备份

## 技术特性

### 前端技术栈
- **框架**：React 19.2.0
- **语言**：TypeScript
- **构建工具**：Vite 7.2.6
- **UI 组件**：Lucide React（图标库）
- **样式**：Tailwind CSS（内联样式）

### 后端服务
- **AI 服务**：DeepSeek、Qwen（统一使用 OpenAI 兼容 API）
- **API 路由**：Express Server
- **功能**：
  - 字词分析（拼音、释义、辨析）
  - 古诗词分析（基本信息、题目生成）
  - OCR 图片识别

### 数据流
1. 用户输入 → 前端组件
2. 前端调用 `/api/analyze` → Express API
3. Express API 调用 AI 模型 API → 获取分析结果
4. 返回结果 → 前端展示和保存
5. 数据存储 → MySQL 数据库

### 性能优化
- **并发控制**：字词分析最多3个并发，避免API限流
- **队列管理**：分析任务自动排队处理
- **分页加载**：词条列表分页显示，提升性能
- **懒加载**：按需加载更多内容

## 用户界面

### 主界面布局
- **顶部导航栏**：
  - 应用标题（"语文错题助手"）
  - 设置按钮
  - 生成试卷按钮
- **内容区域**：
  - 词条录入表单（顶部）
  - 题库列表（下方）
- **底部**：版权信息

### 设置面板
- 数据管理功能区
- 备份/导入/清空操作按钮

### 试卷生成界面
- 顶部工具栏（筛选、打印按钮）
- 试卷预览区域
- 支持滚动查看完整试卷

## 使用流程

### 添加生字词
1. 切换到"生字词录入"标签
2. 输入字词（或上传/拍摄图片）
3. 选择默认考点类型
4. 点击"开始分析"
5. 等待分析完成
6. 确认并保存到题库

### 添加古诗词
1. 切换到"古诗词录入"标签
2. 输入诗名或整首诗
3. 点击"分析古诗"
4. 确认并保存到题库

### 生成试卷
1. 点击"生成试卷"按钮
2. 选择日期筛选（可选）
3. 预览试卷内容
4. 点击"打印/下载PDF"
5. 打印或保存为PDF文件

### 管理数据
1. 点击设置按钮
2. 选择相应操作：
   - 备份数据：下载JSON文件
   - 导入/恢复：上传备份文件
   - 清空题库：删除所有数据

## 注意事项

1. **API 密钥配置**：需要在环境变量中配置 `DEEPSEEK_API_KEY` 或 `QWEN_API_KEY`（根据选择的 AI_PROVIDER）
2. **浏览器兼容性**：需要支持现代浏览器特性（localStorage、ES6+）
3. **网络要求**：需要稳定的网络连接以调用 AI 服务
4. **数据安全**：所有数据存储在本地，建议定期备份
5. **移动端适配**：支持移动端使用，拍照功能在移动端使用原生相机

## 未来扩展方向

- [ ] 云端数据同步
- [ ] 多用户支持
- [ ] 学习进度跟踪
- [ ] 错题统计和分析
- [ ] 更多题型支持
- [ ] 自定义试卷模板
- [ ] 语音朗读功能
- [ ] 学习提醒功能

---

**版本信息**：v0.0.0  
**最后更新**：2025年1月

